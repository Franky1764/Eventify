"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7418],{7418:(w,p,a)=>{a.r(p),a.d(p,{RegisterPageModule:()=>M});var f=a(177),o=a(4341),n=a(4742),c=a(9384),h=a(467);const P=t=>{const s=t.get("password"),l=t.get("confirmPassword");return s&&l&&s.value!==l.value?{passwordMismatch:!0}:null};var e=a(4438),b=a(4171),y=a(3625);function F(t,s){1&t&&(e.j41(0,"div")(1,"ion-text",17),e.EFF(2,"Las contrase\xf1as no coinciden"),e.k0s()())}const R=[{path:"",component:(()=>{var t;class s{constructor(r,i,u,d,g){this.formBuilder=r,this.alertController=i,this.router=u,this.utilsSvc=d,this.firebaseSvc=g,this.registerForm=this.formBuilder.group({uid:[""],username:["",o.k0.required],email:["",[o.k0.required,o.k0.email]],password:["",[o.k0.required,o.k0.minLength(4)]],confirmPassword:["",[o.k0.required,o.k0.minLength(4)]]},{validators:P})}onSubmit(){var r=this;return(0,h.A)(function*(){if(r.registerForm.valid){const d=yield r.utilsSvc.loading();yield d.present();const g=r.registerForm.value;try{var i;const m=null===(i=(yield r.firebaseSvc.signUp(g)).user)||void 0===i?void 0:i.uid;if(m){var u;null===(u=r.registerForm.get("uid"))||void 0===u||u.setValue(m);let k=`users/${m}`;delete r.registerForm.value.password,delete r.registerForm.value.confirmPassword,delete r.registerForm.value.uid,yield r.firebaseSvc.setDocument(k,r.registerForm.value),yield r.firebaseSvc.setDocument(`users/${m}`,{username:g.username,email:g.email,nivel:1,nombre:"",apellido:"",edad:"",whatsapp:"",carrera:"",sede:"",profilePhoto:""}),d.dismiss(),yield(yield r.alertController.create({message:"Usuario creado exitosamente.",buttons:[{text:"OK",handler:()=>{r.router.navigate(["/login"])}}]})).present()}}catch(v){console.error("Error registering user",v),d.dismiss(),yield(yield r.alertController.create({header:"Error",message:"Hubo un problema al registrar el usuario. Por favor, int\xe9ntelo de nuevo.",buttons:["OK"]})).present()}}})()}}return(t=s).\u0275fac=function(r){return new(r||t)(e.rXU(o.ok),e.rXU(n.hG),e.rXU(c.Ix),e.rXU(b.T),e.rXU(y.f))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-register"]],decls:26,vars:4,consts:[[3,"translucent"],["defaultHref","/login","text","Volver"],[3,"fullscreen"],[1,"register-logo-container"],["src","assets/img/logo.png","alt","Logo EasyMMeeT",1,"register-logo"],[2,"text-align","center"],[3,"ngSubmit","formGroup"],[1,"register-form"],["name","person-circle-outline","slot","start"],["formControlName","username","placeholder","Usuario","type","text","required",""],["name","mail-outline","slot","start"],["formControlName","email","placeholder","Correo Electr\xf3nico","type","email","required",""],["name","lock-closed-outline","slot","start"],["formControlName","password","placeholder","Contrase\xf1a","type","password","required",""],["formControlName","confirmPassword","placeholder","Confirmar Contrase\xf1a","type","password","required",""],[4,"ngIf"],["expand","block","color","primary","type","submit",1,"register-button"],["color","danger"]],template:function(r,i){if(1&r&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons"),e.nrm(3,"ion-back-button",1),e.k0s()()(),e.j41(4,"ion-content",2)(5,"div",3),e.nrm(6,"img",4),e.k0s(),e.j41(7,"ion-title",5),e.EFF(8,"Reg\xedstrate aqu\xed"),e.k0s(),e.j41(9,"form",6),e.bIt("ngSubmit",function(){return i.onSubmit()}),e.j41(10,"div",7)(11,"ion-item"),e.nrm(12,"ion-icon",8)(13,"ion-input",9),e.k0s(),e.j41(14,"ion-item"),e.nrm(15,"ion-icon",10)(16,"ion-input",11),e.k0s(),e.j41(17,"ion-item"),e.nrm(18,"ion-icon",12)(19,"ion-input",13),e.k0s(),e.j41(20,"ion-item"),e.nrm(21,"ion-icon",12)(22,"ion-input",14),e.k0s(),e.DNE(23,F,3,0,"div",15),e.j41(24,"ion-button",16),e.EFF(25," Registrarse "),e.k0s()()()()),2&r){let u;e.Y8G("translucent",!0),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(5),e.Y8G("formGroup",i.registerForm),e.R7$(14),e.Y8G("ngIf",(null==i.registerForm||null==i.registerForm.errors?null:i.registerForm.errors.passwordMismatch)&&(null==i.registerForm||null==(u=i.registerForm.get("confirmPassword"))?null:u.touched))}},dependencies:[f.bT,o.qT,o.BC,o.cb,o.YS,o.j4,o.JD,n.Jm,n.QW,n.W9,n.eU,n.iq,n.$w,n.uz,n.IO,n.BC,n.ai,n.Gw,n.el],styles:['@charset "UTF-8";.register-logo-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}.register-logo[_ngcontent-%COMP%]{width:150px;height:auto}.register-form[_ngcontent-%COMP%]{padding:20px}ion-item[_ngcontent-%COMP%]{--border-radius: 15px;--padding-start: 10px;--background: #f7f7f7;margin-bottom:15px;border:1px solid #ddd;--inner-padding: 10px}ion-icon[_ngcontent-%COMP%]{color:#666;font-size:22px}ion-input[_ngcontent-%COMP%]{--padding-start: 10px;color:#000}.register-button[_ngcontent-%COMP%]{--background: #3880ff;--border-radius: 20px;margin-top:20px}']}),s})()}];let C=(()=>{var t;class s{}return(t=s).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[c.iI.forChild(R),c.iI]}),s})(),M=(()=>{var t;class s{}return(t=s).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[f.MD,o.YN,o.X1,n.bv,C]}),s})()}}]);